BITS 16
ORG 0x7c00
mov ah,0
mov al,14h
global err
global loop1
extern extern_cmp
mov ah,2
mov al,1
mov ch,0
mov cl,2
mov dh,0
mov dl,0
mov bx,0x1000
loop1:
int 0x13
cmp ah,0
jz check
mov ah,2
mov al,1
mov ch,0
mov cl,2
mov dh,0
inc dl
jmp loop1
check:
jmp check1
check1:
cmp byte [0x1000],0x0f
jz check2
jmp loop1
check2:cmp byte [0x1001],0x1f
jz check3
jmp loop1
check3:cmp byte[0x1002],0xaa
jz  ldr
jmp loop1
ldr:mov ah,0x0e
mov al,'.'
int 0x10
mov [0x9000],dl
jmp 0:0x1003
err:
mov ah,0x0e
mov al,'E'
int 0x10
mov al,'R'
int 0x10
mov al,'R'
int 0x10
mov al,'O'
int 0x10
mov al,'R'
int 0x10
hng:jmp hng
nxt:mov ah,2
mov al,1
mov ch,0
mov cl,2
mov dh,0
cmp dl,0
jz fdb
cmp dl,1
jz hda
cmp dl,0x80
jz hdb
mov dl,0x80
jmp loop1
fdb:mov dl,1
jmp loop1
hda:mov dl,0x80
jmp loop1
hdb:mov dl,0x81
jmp loop1
times 510 - ($ - $$) db 0
dw 0xaa55
